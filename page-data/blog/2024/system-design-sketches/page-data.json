{"componentChunkName":"component---src-templates-post-tsx-content-file-path-src-posts-2024-system-design-sketches-index-mdx","path":"/blog/2024/system-design-sketches/","result":{"data":{"mdx":{"id":"7565c528-0457-55f0-9d58-76bfcc07199c","body":"\nSystem design sketches for popular system design interview questions:\n\n- [Design Social Network](#social-network) (like Facebook, Twitter, Instagram, Reddit)\n- [Design Ride-sharing App](#ride-sharing-app) (like Uber, Lyft)\n- [Design Messenger](#messenger) (like WhatsApp, Telegram, Viber)\n- [Design Video Streaming App](#video-streaming-app) (like YouTube, Netflix)\n- [Design File Hosting App](#file-hosting-app) (like GoogleDrive, Dropbox)\n- [Design Web Crawler](#web-crawler)\n\n> See the sketches in full resolution at [okso.app/showcase/system-design](https://okso.app/showcase/system-design)\n\n<iframe\n  width=\"100%\"\n  height=\"485\"\n  src=\"https://www.youtube.com/embed/d0_XAN29g7U?si=T5Bbb6rJ06Ku20_v\"\n  title=\"YouTube video player\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n  referrerpolicy=\"strict-origin-when-cross-origin\"\n  allowfullscreen>\n</iframe>\n\n## Social Network\n\n```\nFunctional requirements:\n------------------------\n- Follow people\n- See followers and falowees\n- Create posts (text, image, url, @mentions)\n- Like posts\n- View user feed\n- View home feed\n\n\nNon-functional requirements:\n----------------------------\n- Add post <500ms\n- View feed <500ms\n- Post in feed with ~2 mins delay is ok\n- Billions of users\n- Unlimited followers\n\n\nCore entities:\n--------------\n- User\n- Follow\n- Post\n\n\nAPI (RPC-like):\n---------------\n- POST /getFollowers     {userId}\n- POST /getFollowees     {userId}\n- POST /followUser       {userId}\n\n- POST /createPost       {text}\n- POST /likePost         {postId}\n\n- POST /getHomeFeed      {userId}\n- POST /getUserFeed      {userId}\n```\n\nDesign sketch:\n\n![Social network](./assets/demo-31-system-design-sketches-social-network.png)\n\nDeep dives:\n- [Social network: System design sketch](https://okso.app/showcase/system-design/page/d0af682e-08cb-4b6f-3e12-1f5c1d3f8aec) (okso.app)\n- [Facebook News Feed](https://www.hellointerview.com/learn/system-design/answer-keys/fb-news-feed) (hellointerview)\n- [Instagram + Twitter + Facebook + Reddit](https://www.youtube.com/watch?v=S2y9_XYOZsg) (Jordan has no life)\n\n## Ride-Sharing App\n\n```\nFunctional requirements:\n------------------------\n- Rider gets estimated fare (by Start and Destination locations)\n- Rider requests a ride based on the estimate\n- Driver accepts/denies request + Navigates to pickup/drop-off\n\n\nNon-functional requirements:\n----------------------------\n- Low latency for rider-driver matching (<1min)\n- Consistency of rider-driver 1:1 matching\n  - For one ride, only one driver will get request at a time\n- Highly available outside matching\n- Handle high-throughput (peak hours, popular events)\n\n\nCore entities:\n--------------\n- Rider\n- Driver\n- Ride\n- Location\n\n\nAPI:\n---------------\n- POST /getEstimate({from, to}) --> Partial<Ride>\n\n- POST /requestRide({ride_id}) --> Ride\n\n- POST /getRide({ride_id})\n\n  - gets the latest ride entity to display the\n    ride details for both rider and driver apps\n\n- POST /updateLocation({lat, lon})\n\n  - both driver and rider can update their locations\n    which may be used to display their on the map\n  - drivers might update their location i.e. once\n    per 5 seconds (it is needed for matching)\n  - however this can be optimised on the client side,\n    where we might say that location update is\n    proportional to driver speed: for still drivers\n    we update location rarely, for moving - more often\n\n- POST /acceptRide({ride_id, accept})\n  - ride is being accepted by the driver\n\n- POST /updateRide({ride_id, status})\n```\n\nDesign sketch:\n\n![Ride-sharing app](./assets/demo-31-system-design-sketches-ride-sharing.png)\n\nDeep dives:\n- [Ride-sharing platform: System design sketch](https://okso.app/showcase/system-design/page/3033cade-7fcb-420a-0937-64245b7a1dc4) (okso.app)\n- [Design Uber](https://www.hellointerview.com/learn/system-design/answer-keys/uber) (hellointerview)\n\n## Messenger\n\n```\nFunctional requirements:\n------------------------\n- Group chat (<100 users)\n- Send message\n- Receive message\n- Persist messages (user messages are\n  available on multiple devices)\n\n\nNon-functional requirements:\n----------------------------\n- Low latency for message delivery (<500ms)\n- No lost messages (delivery guarantee)\n\n\nCore entities:\n--------------\n- Users\n- Groups\n- Messages\n\n\nAPI:\n---------------\n- createGroup({users: [], name: ''}) -> {group_id}\n- joinGroup({group_id}) -> \"ACK\"/ \"ERR\"\n- quitGroup({group_id}) -> \"ACK\"/ \"ERR\"\n- getMyGroups() -> {groups: []}\n- getGroupMessages({group_id, max_message_id, min_message_id}) -> {messages: []}\n\nWebSocket:\n- connect()\n- sendMessage({group_id, message, media: []}) -> \"ACK\"/ \"ERR\"\n- onGroupUpdated({group_id, participants}) -> \"ACK\"\n- onMessage({chat_id, user_id, message, attachments}) -> \"ACK\"\n```\n\nDesign sketch:\n\n![Messenger](./assets/demo-31-system-design-sketches-messenger.png)\n\nDeep dives:\n- [Messenger: System design sketch](https://okso.app/showcase/system-design/page/4c662fd7-37d4-4864-208c-500f88565839) (okso.app)\n- [Facebook Messenger + WhatsApp](https://www.youtube.com/watch?v=-3Ge8EooS3g) (Jordan has no life)\n- [Messenger/WhatsApp Design Deep Dive](https://www.youtube.com/watch?v=2Ejdj6QdDD0) (Jordan has no life)\n- [Design Whatsapp or Messenger](https://www.hellointerview.com/learn/system-design/answer-keys/whatsapp) (hellointerview)\n\n## Video Streaming App\n\n```\nFunctional requirements:\n------------------------\n- Upload video\n- Watch video (read-heavy)\n- Comment on video\n\n\nNon-functional requirements:\n----------------------------\n- Reliable uploads (no corrupted/missing videos)\n- Read-heavy (read/write ratio ~100:1)\n- Availability > Consistency (1-2 min delay between upload and feed is ok)\n- Low latency (before video starts playing)\n\n\nCore entities:\n--------------\n- User\n- Video Metadata\n- Video Chunks\n- Users\n- Comments\n\n\nAPI (RPC-like):\n---------------\n- POST /initiateUpload  {title, description, video, ...}}\n  - server responds with S3 private upload URL\n  - the actual video upload is going directly from client to S3\n\n- GET /watch   {video_id}\n  - returns video chunks metadata\n    - S3 (or CDN) URLs to manifest/playlist files\n  - video streaming happens directly from CDNs\n  - download by chunks (buffering, ~1Mb), no need to load all\n```\n\nDesign sketch:\n\n![Video streaming app](./assets/demo-31-system-design-sketches-video-streaming.png)\n\nDeep dives:\n- [Video streaming platform: System design sketch](https://okso.app/showcase/system-design/page/2ef00091-cdfa-4f07-28cf-d0b6e4207de5) (okso.app)\n- [Design Youtube](https://www.youtube.com/watch?v=jPKTo1iGQiE) (NeetCode)\n- [Netflix + YouTube](https://www.youtube.com/watch?v=43bB7oSn190) (Jordan has no life)\n- [System Design: YouTube](https://www.youtube.com/watch?v=ghYbFgeqXa0) (System Design Fight Club)\n\n## File Hosting App\n\n```\nFunctional requirements:\n------------------------\n- Upload file\n- Download file\n- Sync files across devices\n\n\nNon-functional requirements:\n----------------------------\n- Availability over consistency\n  - Download the older version of\n    the file instead of waiting\n    for a new version to propagate\n    is ok\n- low latency for uploads and downloads\n- support large files (50Gb)\n  - resumable uploads\n- high data integrity (accurate syncs)\n\n\nCore entities:\n--------------\n- File (row bytes)\n- File Metadata\n- Users\n\n\nAPI:\n---------------\n- POST /uploadFile({metadata}) --> {upload_id, presigned_url}\n\n- POST /getFile({file_id}) --> {file{}, metadata}\n\n- POST /getChanges({since}) --> file_metadata[]\n```\n\nDesign sketch:\n\n![File hosting app](./assets/demo-31-system-design-sketches-file-hosting.png)\n\nDeep dives:\n- [File hosting app](https://okso.app/showcase/system-design/page/868e746d-0276-40e1-2bcf-b42bceae1b8f) (okso.app)\n- [Design Dropbox](https://www.hellointerview.com/learn/system-design/answer-keys/dropbox) (hellointerview)\n\n## Web Crawler\n\n```\nFunctional requirements:\n------------------------\n- Scrape the web starting from seed URLs\n- Extract and store text data\n\n\nNon-functional requirements:\n----------------------------\n- Fault-tolerant\n- Politeness (respect robots.txt, don't DDoS)\n- Scale to 1B pages\n- Efficient (crawl within a week)\n\n\nCore entities:\n--------------\n- URLs\n- Text data\n- Domain metadata\n\n\nInterface:\n----------\n- input: seed URLs\n- output: text data\n\n\nData Flow:\n----------\n1. Take seed URLs from a frontier and the IP from DNS\n2. Fetch HTML\n3. Extract text\n4. Store text in the database\n5. Extract URLs from the page and add then to the frontier\n6. Repeat steps 1-5 until all URLs are crawled\n```\n\nDesign sketch:\n\n![Web crawler](./assets/demo-31-system-design-sketches-web-crawler.png)\n\nDeep dives:\n- [Web-crawler app: System design sketch](https://okso.app/showcase/system-design/page/7c557108-277c-4a77-12ce-7622b3493420) (okso.app)\n- [Design a Web Crawler](https://www.hellointerview.com/learn/system-design/answer-keys/web-crawler) (hellointerview)\n- [Design a Web Crawler](https://www.youtube.com/watch?v=MdWvMX4J-Vc) (Jordan has no life)\n- [System Design distributed web crawler](https://www.youtube.com/watch?v=BKZxZwUgL3Y) (Tech Dummies Narendra)\n","fields":{"slug":"/blog/2024/system-design-sketches/"},"internal":{"contentFilePath":"/home/runner/work/trekhleb.github.io/trekhleb.github.io/src/posts/2024/system-design-sketches/index.mdx"},"frontmatter":{"title":"System Design Sketches","summary":"System design sketches for popular system design interview questions.","date":"18 July, 2024","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/b62157e6c8612b36932aa96c9afa8070/171b1/02-cover.png","srcSet":"/static/b62157e6c8612b36932aa96c9afa8070/d305d/02-cover.png 750w,\n/static/b62157e6c8612b36932aa96c9afa8070/b7ba1/02-cover.png 1080w,\n/static/b62157e6c8612b36932aa96c9afa8070/b291c/02-cover.png 1366w,\n/static/b62157e6c8612b36932aa96c9afa8070/171b1/02-cover.png 1800w","sizes":"100vw"},"sources":[{"srcSet":"/static/b62157e6c8612b36932aa96c9afa8070/a77c3/02-cover.webp 750w,\n/static/b62157e6c8612b36932aa96c9afa8070/f272c/02-cover.webp 1080w,\n/static/b62157e6c8612b36932aa96c9afa8070/a0d95/02-cover.webp 1366w,\n/static/b62157e6c8612b36932aa96c9afa8070/4791d/02-cover.webp 1800w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5288888888888889}}}}}},"pageContext":{"slug":"/blog/2024/system-design-sketches/","frontmatter":{"title":"System Design Sketches","summary":"System design sketches for popular system design interview questions.","cover":"assets/02-cover.png","date":"2024-07-18T00:00:00.000Z"}}},"staticQueryHashes":[],"slicesMap":{}}